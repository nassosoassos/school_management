<%-# Fedena
   #Copyright 2010 Foradian Technologies Private Limited
   #
   #This product includes software developed at
   #Project Fedena - http://www.projectfedena.org/
   #
   #Licensed under the Apache License, Version 2.0 (the "License");
   #you may not use this file except in compliance with the License.
   #You may obtain a copy of the License at
   #
   #  http://www.apache.org/licenses/LICENSE-2.0
   #
   #Unless required by applicable law or agreed to in writing,
   #software distributed under the License is distributed on an
   #"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
   #KIND, either express or implied.  See the License for the
   #specific language governing permissions and limitations
   #under the License. -%>

<div id="page-yield" class="available_sections">
<div class="hor_line"></div>
<div id="student_profile_heading" class="section">
  <div id ="student_main_info">
    <h2> <%= @student.full_name %>  </h2>
    <h4>Βαθμολογία Σπουδαστή</h4>
  </div>
</div>


<table width="100%" class="section" id="pdf-table">
  <tr class="table-header">
    <td colspan="1"></td>
    <td colspan="3" align="center">ΒΑΘΜΟΛΟΓΙΑ</td>
    <td colspan="3"></td>
    <td colspan="2"></td>
  </tr>
  <tr class="table-header">
    <td>Ακαδημαϊκό Έτος</td>
    <td>Παν/μίου</td>
    <td>Σχολής Μαθημάτων</td>
    <td>Προσόντων Διαγωγής</td>
    <td>Μόρια</td>
    <td>Τελική Βαθμολογία</td>
    <td>Σειρά</td>
    <td>Αρ. Περατωθέντων Μαθημάτων</td>
    <td>Παρατηρήσεις</td>
  </tr>
  <% @grades_info.each do |g_i| %>
      <tr class="<%= cycle('odd','even') %>">
        <td class="col-5"> <%= g_i[:year] %> </td>
        <% if g_i[:uni_gpa].blank? %>
            <% uni_gpa_string = "" %>
        <% else %>
            <% uni_gpa_string = sprintf( "%.02f" , g_i[:uni_gpa] ) %>
        <% end %>
        <td class="col-5" align="center"> <%= uni_gpa_string %></td>
        <% if g_i[:mil_gpa].blank? %>
            <% mil_gpa_string = "" %>
        <% else %>
            <% mil_gpa_string = sprintf( "%.02f" , g_i[:mil_gpa] ) %>
        <%end%>
        <td class="col-5" align="center"> <%= mil_gpa_string %></td>
        <% if g_i[:mil_p_gpa] != nil %>
            <% mil_p_gpa_string = sprintf( "%.02f" , g_i[:mil_p_gpa]) %>
        <% else %>
            <% mil_p_gpa_string = "" %>
        <% end %>

        <td class="col-5" align="center"> <%= mil_p_gpa_string %></td>
        <% if g_i[:total_points].blank? %>
            <% global_sum_string = "" %>
        <% else %>
            <% global_sum_string = sprintf( "%.02f" , g_i[:total_points]) %>
        <% end %>
        <td class="col-5" align="center"> <%= global_sum_string %></td>
        <% if g_i[:total_gpa].blank? %>
            <% total_gpa_string = "" %>
        <% else %>
            <% total_gpa_string = sprintf( "%.02f" , g_i[:total_gpa]) %>
        <% end %>
        <td class="col-5" align="center"> <%= total_gpa_string %></td>
        <td class="col-5" align="center"> <%= g_i[:seniority] %></td>
        <td class="col-5" align="center"> <%= g_i[:n_passed_subjects] %></td>

        <% if g_i[:n_transfer_subjects]!=nil and g_i[:n_transfer_subjects]>0 %>
            <%  notes = g_i[:n_transfer_subjects].to_s + " Μεταφερόμενα" %>
        <%elsif g_i[:n_transfer_subjects].blank? %>
            <% notes = "" %>
        <% else %>
            <% if @student.gender == "m" %>
                <% notes = "Περατώσας" %>
            <% else %>
                <% notes = "Περατώσασα" %>
            <% end %>
        <% end %>
        <td class="col-5"> <%= notes %></td>
      </tr>
  <% end %>
  <% if @cum_grades[:cum_univ_gpa] %>
      <tr/>
      <tr class="tr-<%= cycle('odd','even') %>">
        <td class="col-5"> Συγκεντρωτικά </td>
        <% if @cum_grades[:cum_univ_gpa].blank? %>
            <% uni_gpa_string = "" %>
        <% else %>
            <% uni_gpa_string = sprintf( "%.02f" , @cum_grades[:cum_univ_gpa] ) %>
        <% end %>
        <td class="col-5" align="center"> <%= uni_gpa_string %></td>
        <% if @cum_grades[:cum_mil_gpa].blank? %>
            <% mil_gpa_string = "" %>
        <% else %>
            <% mil_gpa_string = sprintf( "%.02f" , @cum_grades[:cum_mil_gpa] ) %>
        <%end%>
        <td class="col-5" align="center"> <%= mil_gpa_string %></td>
        <% if @cum_grades[:cum_mil_p_gpa] != nil %>
            <% mil_p_gpa_string = sprintf( "%.02f" , @cum_grades[:cum_mil_p_gpa]) %>
        <% else %>
            <% mil_p_gpa_string = "" %>
        <% end %>

        <td class="col-5" align="center"> <%= mil_p_gpa_string %></td>
        <% if @cum_grades[:cum_points].blank? %>
            <% global_sum_string = "" %>
        <% else %>
            <% global_sum_string = sprintf( "%.02f" , @cum_grades[:cum_points]) %>
        <% end %>
        <td class="col-5" align="center"> <%= global_sum_string %></td>
        <% if @cum_grades[:cum_gpa].blank? %>
            <% total_gpa_string = "" %>
        <% else %>
            <% total_gpa_string = sprintf( "%.02f" , @cum_grades[:cum_gpa]) %>
        <% end %>
        <td class="col-5" align="center"> <%= total_gpa_string %></td>
        <td class="col-5" align="center"> <%= @cum_grades[:cum_seniority] %></td>
        <td class="col-5" align="center"> <%= @cum_grades[:cum_n_passed_subjects] %></td>

        <% if @cum_grades[:cum_n_unfinished_subjects]!=nil and @cum_grades[:cum_n_unfinished_subjects]>0 %>
            <%  notes = @cum_grades[:cum_n_unfinished_subjects].to_s + " Οφειλόμενα Ιουνίου" %>
        <%elsif @cum_grades[:cum_n_unfinished_subjects].blank? %>
            <% notes = "" %>
        <% else %>
            <% notes = "Κανένα οφειλόμενο" %>
        <% end %>
        <td class="col-5"> <%= notes %></td>
      </tr>
      <tr>
      </tr>
  <% end %>
</table>



</div>
